import 'dart:convert';

import '../../domain/entities/location.dart';
import '../models/forecast_model.dart';

abstract class ForecastDataSource {
  Future<List<ForecastModel>> getFiveDayForecast(Location location);
}

class FakeForecastDataSource implements ForecastDataSource {
  // Calling: https://api.openweathermap.org/data/2.5/forecast?q=London&units=metric&appid=API_KEY
  String getFakeForecastData() {
    return '''{"cod":"200","message":0,"cnt":40,"list":[{"dt":1573808400,"main":{"temp":6.14,"temp_min":6.14,"temp_max":6.98,"pressure":1004,"sea_level":1004,"grnd_level":1000,"humidity":82,"temp_kf":-0.85},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.82,"deg":9},"sys":{"pod":"d"},"dt_txt":"2019-11-15 09:00:00"},{"dt":1573819200,"main":{"temp":7.86,"temp_min":7.86,"temp_max":8.49,"pressure":1004,"sea_level":1004,"grnd_level":999,"humidity":69,"temp_kf":-0.64},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":6.39,"deg":22},"sys":{"pod":"d"},"dt_txt":"2019-11-15 12:00:00"},{"dt":1573830000,"main":{"temp":8.12,"temp_min":8.12,"temp_max":8.54,"pressure":1002,"sea_level":1002,"grnd_level":997,"humidity":62,"temp_kf":-0.43},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":7.6,"deg":19},"rain":{"3h":0.06},"sys":{"pod":"d"},"dt_txt":"2019-11-15 15:00:00"},{"dt":1573840800,"main":{"temp":7.48,"temp_min":7.48,"temp_max":7.69,"pressure":1001,"sea_level":1001,"grnd_level":996,"humidity":80,"temp_kf":-0.22},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":7.21,"deg":18},"rain":{"3h":0.69},"sys":{"pod":"n"},"dt_txt":"2019-11-15 18:00:00"},{"dt":1573851600,"main":{"temp":7.17,"temp_min":7.17,"temp_max":7.17,"pressure":1001,"sea_level":1001,"grnd_level":997,"humidity":73,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":5.24,"deg":41},"rain":{"3h":0.88},"sys":{"pod":"n"},"dt_txt":"2019-11-15 21:00:00"},{"dt":1573862400,"main":{"temp":7,"temp_min":7,"temp_max":7,"pressure":1002,"sea_level":1002,"grnd_level":998,"humidity":77,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":97},"wind":{"speed":4.05,"deg":56},"rain":{"3h":0.19},"sys":{"pod":"n"},"dt_txt":"2019-11-16 00:00:00"},{"dt":1573873200,"main":{"temp":6.42,"temp_min":6.42,"temp_max":6.42,"pressure":1002,"sea_level":1002,"grnd_level":999,"humidity":75,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":80},"wind":{"speed":3.21,"deg":59},"rain":{"3h":0.13},"sys":{"pod":"n"},"dt_txt":"2019-11-16 03:00:00"},{"dt":1573884000,"main":{"temp":5.59,"temp_min":5.59,"temp_max":5.59,"pressure":1004,"sea_level":1004,"grnd_level":1000,"humidity":74,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":70},"wind":{"speed":1.73,"deg":64},"sys":{"pod":"n"},"dt_txt":"2019-11-16 06:00:00"},{"dt":1573894800,"main":{"temp":6.4,"temp_min":6.4,"temp_max":6.4,"pressure":1006,"sea_level":1006,"grnd_level":1002,"humidity":71,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":95},"wind":{"speed":1.74,"deg":102},"sys":{"pod":"d"},"dt_txt":"2019-11-16 09:00:00"},{"dt":1573905600,"main":{"temp":8.05,"temp_min":8.05,"temp_max":8.05,"pressure":1007,"sea_level":1007,"grnd_level":1003,"humidity":59,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":94},"wind":{"speed":2.81,"deg":136},"sys":{"pod":"d"},"dt_txt":"2019-11-16 12:00:00"},{"dt":1573916400,"main":{"temp":7.9,"temp_min":7.9,"temp_max":7.9,"pressure":1007,"sea_level":1007,"grnd_level":1003,"humidity":63,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":56},"wind":{"speed":0.91,"deg":204},"sys":{"pod":"d"},"dt_txt":"2019-11-16 15:00:00"},{"dt":1573927200,"main":{"temp":6.12,"temp_min":6.12,"temp_max":6.12,"pressure":1008,"sea_level":1008,"grnd_level":1004,"humidity":79,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":31},"wind":{"speed":1.02,"deg":173},"sys":{"pod":"n"},"dt_txt":"2019-11-16 18:00:00"},{"dt":1573938000,"main":{"temp":5.43,"temp_min":5.43,"temp_max":5.43,"pressure":1009,"sea_level":1009,"grnd_level":1005,"humidity":83,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":6},"wind":{"speed":1.45,"deg":176},"sys":{"pod":"n"},"dt_txt":"2019-11-16 21:00:00"},{"dt":1573948800,"main":{"temp":4.91,"temp_min":4.91,"temp_max":4.91,"pressure":1009,"sea_level":1009,"grnd_level":1005,"humidity":84,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":3},"wind":{"speed":0.79,"deg":257},"sys":{"pod":"n"},"dt_txt":"2019-11-17 00:00:00"},{"dt":1573959600,"main":{"temp":4.47,"temp_min":4.47,"temp_max":4.47,"pressure":1009,"sea_level":1009,"grnd_level":1005,"humidity":86,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":0.78,"deg":231},"sys":{"pod":"n"},"dt_txt":"2019-11-17 03:00:00"},{"dt":1573970400,"main":{"temp":4.12,"temp_min":4.12,"temp_max":4.12,"pressure":1010,"sea_level":1010,"grnd_level":1006,"humidity":87,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":0.57,"deg":205},"sys":{"pod":"n"},"dt_txt":"2019-11-17 06:00:00"},{"dt":1573981200,"main":{"temp":4.97,"temp_min":4.97,"temp_max":4.97,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":81,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":54},"wind":{"speed":0.86,"deg":290},"sys":{"pod":"d"},"dt_txt":"2019-11-17 09:00:00"},{"dt":1573992000,"main":{"temp":7.65,"temp_min":7.65,"temp_max":7.65,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":61,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":67},"wind":{"speed":0.88,"deg":275},"sys":{"pod":"d"},"dt_txt":"2019-11-17 12:00:00"},{"dt":1574002800,"main":{"temp":7.86,"temp_min":7.86,"temp_max":7.86,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":64,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":29},"wind":{"speed":1.07,"deg":290},"sys":{"pod":"d"},"dt_txt":"2019-11-17 15:00:00"},{"dt":1574013600,"main":{"temp":6.6,"temp_min":6.6,"temp_max":6.6,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":76,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":59},"wind":{"speed":1.3,"deg":278},"sys":{"pod":"n"},"dt_txt":"2019-11-17 18:00:00"},{"dt":1574024400,"main":{"temp":6.07,"temp_min":6.07,"temp_max":6.07,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":89,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":83},"wind":{"speed":2.44,"deg":329},"sys":{"pod":"n"},"dt_txt":"2019-11-17 21:00:00"},{"dt":1574035200,"main":{"temp":7.37,"temp_min":7.37,"temp_max":7.37,"pressure":1011,"sea_level":1011,"grnd_level":1006,"humidity":89,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":91},"wind":{"speed":3.92,"deg":342},"rain":{"3h":0.19},"sys":{"pod":"n"},"dt_txt":"2019-11-18 00:00:00"},{"dt":1574046000,"main":{"temp":6.89,"temp_min":6.89,"temp_max":6.89,"pressure":1011,"sea_level":1011,"grnd_level":1006,"humidity":84,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":4.36,"deg":349},"rain":{"3h":0.56},"sys":{"pod":"n"},"dt_txt":"2019-11-18 03:00:00"},{"dt":1574056800,"main":{"temp":7.11,"temp_min":7.11,"temp_max":7.11,"pressure":1011,"sea_level":1011,"grnd_level":1007,"humidity":80,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":5.13,"deg":357},"rain":{"3h":0.63},"sys":{"pod":"n"},"dt_txt":"2019-11-18 06:00:00"},{"dt":1574067600,"main":{"temp":6.38,"temp_min":6.38,"temp_max":6.38,"pressure":1012,"sea_level":1012,"grnd_level":1008,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.59,"deg":346},"sys":{"pod":"d"},"dt_txt":"2019-11-18 09:00:00"},{"dt":1574078400,"main":{"temp":7.76,"temp_min":7.76,"temp_max":7.76,"pressure":1012,"sea_level":1012,"grnd_level":1008,"humidity":70,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.69,"deg":349},"sys":{"pod":"d"},"dt_txt":"2019-11-18 12:00:00"},{"dt":1574089200,"main":{"temp":7.65,"temp_min":7.65,"temp_max":7.65,"pressure":1012,"sea_level":1012,"grnd_level":1008,"humidity":67,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":5.04,"deg":336},"rain":{"3h":0.06},"sys":{"pod":"d"},"dt_txt":"2019-11-18 15:00:00"},{"dt":1574100000,"main":{"temp":5.93,"temp_min":5.93,"temp_max":5.93,"pressure":1013,"sea_level":1013,"grnd_level":1009,"humidity":73,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":56},"wind":{"speed":3.68,"deg":321},"sys":{"pod":"n"},"dt_txt":"2019-11-18 18:00:00"},{"dt":1574110800,"main":{"temp":4.75,"temp_min":4.75,"temp_max":4.75,"pressure":1013,"sea_level":1013,"grnd_level":1009,"humidity":73,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":25},"wind":{"speed":2.37,"deg":309},"sys":{"pod":"n"},"dt_txt":"2019-11-18 21:00:00"},{"dt":1574121600,"main":{"temp":3.84,"temp_min":3.84,"temp_max":3.84,"pressure":1014,"sea_level":1014,"grnd_level":1010,"humidity":75,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":21},"wind":{"speed":2.19,"deg":269},"sys":{"pod":"n"},"dt_txt":"2019-11-19 00:00:00"},{"dt":1574132400,"main":{"temp":3.13,"temp_min":3.13,"temp_max":3.13,"pressure":1013,"sea_level":1013,"grnd_level":1009,"humidity":80,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.75,"deg":253},"sys":{"pod":"n"},"dt_txt":"2019-11-19 03:00:00"},{"dt":1574143200,"main":{"temp":2.68,"temp_min":2.68,"temp_max":2.68,"pressure":1013,"sea_level":1013,"grnd_level":1009,"humidity":85,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":7},"wind":{"speed":1.31,"deg":224},"sys":{"pod":"n"},"dt_txt":"2019-11-19 06:00:00"},{"dt":1574154000,"main":{"temp":3.54,"temp_min":3.54,"temp_max":3.54,"pressure":1013,"sea_level":1013,"grnd_level":1009,"humidity":76,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":87},"wind":{"speed":1.51,"deg":150},"sys":{"pod":"d"},"dt_txt":"2019-11-19 09:00:00"},{"dt":1574164800,"main":{"temp":5.83,"temp_min":5.83,"temp_max":5.83,"pressure":1012,"sea_level":1012,"grnd_level":1008,"humidity":67,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":94},"wind":{"speed":2.84,"deg":149},"sys":{"pod":"d"},"dt_txt":"2019-11-19 12:00:00"},{"dt":1574175600,"main":{"temp":6.83,"temp_min":6.83,"temp_max":6.83,"pressure":1011,"sea_level":1011,"grnd_level":1006,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":3.36,"deg":140},"sys":{"pod":"d"},"dt_txt":"2019-11-19 15:00:00"},{"dt":1574186400,"main":{"temp":6.28,"temp_min":6.28,"temp_max":6.28,"pressure":1010,"sea_level":1010,"grnd_level":1006,"humidity":80,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.7,"deg":154},"sys":{"pod":"n"},"dt_txt":"2019-11-19 18:00:00"},{"dt":1574197200,"main":{"temp":6.36,"temp_min":6.36,"temp_max":6.36,"pressure":1010,"sea_level":1010,"grnd_level":1006,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":4.08,"deg":152},"sys":{"pod":"n"},"dt_txt":"2019-11-19 21:00:00"},{"dt":1574208000,"main":{"temp":6.81,"temp_min":6.81,"temp_max":6.81,"pressure":1009,"sea_level":1009,"grnd_level":1005,"humidity":85,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":4.73,"deg":157},"sys":{"pod":"n"},"dt_txt":"2019-11-20 00:00:00"},{"dt":1574218800,"main":{"temp":6.52,"temp_min":6.52,"temp_max":6.52,"pressure":1008,"sea_level":1008,"grnd_level":1004,"humidity":80,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.94,"deg":152},"sys":{"pod":"n"},"dt_txt":"2019-11-20 03:00:00"},{"dt":1574229600,"main":{"temp":6.03,"temp_min":6.03,"temp_max":6.03,"pressure":1008,"sea_level":1008,"grnd_level":1004,"humidity":80,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":4.07,"deg":137},"sys":{"pod":"n"},"dt_txt":"2019-11-20 06:00:00"}],"city":{"id":2643743,"name":"London","coord":{"lat":51.5073,"lon":-0.1277},"country":"GB","population":1000000,"timezone":0,"sunrise":1573802277,"sunset":1573834341}}''';
  }

  @override
  Future<List<ForecastModel>> getFiveDayForecast(Location location) async {
    final fullJson = getFakeForecastData();
    final forecastList = json.decode(fullJson)['list'] as List;

    return forecastList
        .map((jsonObject) => ForecastModel.fromMap(jsonObject))
        // Filtering it down to 5 entries - weather at noon.
        .take(2)
        .toList();
  }
}
